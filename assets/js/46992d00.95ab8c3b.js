"use strict";(self.webpackChunksite_docusaurus_template=self.webpackChunksite_docusaurus_template||[]).push([[9823],{6166:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var a=n(7462),i=(n(7294),n(3905)),s=(n(1694),n(6596),n(6533));n(505),n(1496),n(4866),n(5162);const r={sidebar_position:3},o="Scriptable Objects",l={unversionedId:"children/scriptableobjects",id:"children/scriptableobjects",title:"Scriptable Objects",description:"A ScriptableObject (abbreviated as SO) is a data container that you can use to save large amounts of data, independent of class instances. An example scenario where this will be useful is when your game needs to instantiate tons of Prefab with a Script component that stores unchanging variables. We can save memory by storing these data in a ScriptableObject instead and these Prefabs can refer to the content of the ScriptableObject at runtime.",source:"@site/docs/04-children/scriptableobjects.md",sourceDirName:"04-children",slug:"/children/scriptableobjects",permalink:"/50033/docs/children/scriptableobjects",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"C# Quick Tour",permalink:"/50033/docs/children/static"}},c={},p=[{value:"Create Scriptable Object Template",id:"create-scriptable-object-template",level:2},{value:"Instantiate",id:"instantiate",level:3},{value:"Usage in Runtime",id:"usage-in-runtime",level:3},{value:"Methods",id:"methods",level:3},{value:"Storing Variables",id:"storing-variables",level:2},{value:"C# Method Overloading",id:"c-method-overloading",level:3}],u={toc:p},d="wrapper";function m(e){let{components:t,...r}=e;return(0,i.kt)(d,(0,a.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"scriptable-objects"},"Scriptable Objects"),(0,i.kt)("p",null,"A ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/Manual/class-ScriptableObject.html"},"ScriptableObject")," (abbreviated as SO) is a ",(0,i.kt)("strong",{parentName:"p"},"data container")," that you can use to save large amounts of data, independent of class instances. An example scenario where this will be useful is when your game needs to instantiate tons of Prefab with a Script component that stores ",(0,i.kt)("span",{className:"orange-bold"},"unchanging")," variables. We can save memory by storing these data in a ScriptableObject instead and these Prefabs can refer to the content of the ScriptableObject at runtime."),(0,i.kt)("p",null,"ScriptableObject is also useful to store standard constants for your game, such as reset state, max health for each character, cost of items, etc."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"In the later weeks, we will also learn how to utilise ScriptableObjects to create a handy Finite State Machine.")),(0,i.kt)("p",null,"From the official documentation, it's stated that the main use cases for ScriptableObjects are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Saving and storing data during an Editor session"),(0,i.kt)("li",{parentName:"ul"},"Saving data as an Asset in your Project to use at run time")),(0,i.kt)("p",null,"This week, we mainly focus on the simplified version of the first use case: to use an SO instance to store ",(0,i.kt)("strong",{parentName:"p"},"game constants"),", accessible by any script."),(0,i.kt)("h2",{id:"create-scriptable-object-template"},"Create Scriptable Object Template"),(0,i.kt)("p",null,"To begin creating this data container, create a new script under a new directory: ",(0,i.kt)("inlineCode",{parentName:"p"},"Assets/Scripts/ScriptableObjects/"),"and call it ",(0,i.kt)("inlineCode",{parentName:"p"},"GameConstants.cs"),". Instead of inheriting MonoBehavior as usual, we let it inherit ScriptableObject:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:'title="GameConstants.cs"',title:'"GameConstants.cs"'},'using UnityEngine;\n\n[CreateAssetMenu(fileName =  "GameConstants", menuName =  "ScriptableObjects/GameConstants", order =  1)]\npublic  class GameConstants : ScriptableObject\n{\n    // set your data here\n}\n')),(0,i.kt)("p",null,"The header ",(0,i.kt)("inlineCode",{parentName:"p"},"CreateAssetMenu")," allows us to create ",(0,i.kt)("strong",{parentName:"p"},"instances")," of this class in the Project in the Unity Project Window. Proceed by declaring a few constants that might be useful for your project inside the class, for example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs"},"public  class GameConstants : ScriptableObject\n{\n    //highlight-start\n    // lives\n    int maxLives;\n\n    // Mario's movement\n    int speed;\n    int maxSpeed;\n    int upSpeed;\n    int deathImpulse;\n    Vector3 marioStartingPosition;\n\n    // Goomba's movement\n    float goombaPatrolTime;\n    float goombaMaxOffset;\n    //highlight-end\n}\n\n")),(0,i.kt)("h3",{id:"instantiate"},"Instantiate"),(0,i.kt)("p",null,"Now you can ",(0,i.kt)("span",{className:"orange-bold"},"instantiate")," the scriptable object by right clicking on the Project window then >> Create >> ScriptableObjects >> GameConstants (this is possible since we have declared ",(0,i.kt)("inlineCode",{parentName:"p"},"CreateAssetMenu"),"). Give it a name, here we call it ",(0,i.kt)("inlineCode",{parentName:"p"},"SMBConstants")," (SuperMarioBrosConstants)."),(0,i.kt)(s.Z,{path:n(9715).Z,widthPercentage:"100%",mdxType:"ImageCard"}),(0,i.kt)("p",null,"Over at the inspector, you can set the values to correspond to each constant that's been declared before in ",(0,i.kt)("inlineCode",{parentName:"p"},"PlayerMovement")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"EnemyMovement"),"."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"As of now, ",(0,i.kt)("inlineCode",{parentName:"p"},"maxLives")," are not used yet, leave it at 10.")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"The values stored inside a ScriptableObject persists (unlike runtime variables that exists only in-memory), so you can store something in these data containers such as the player\u2019s highest score, and load it again the next time the game starts. You can treat SO instancse as files.")),(0,i.kt)("h3",{id:"usage-in-runtime"},"Usage in Runtime"),(0,i.kt)("p",null,"To use the SO values in any script, simply declare it as a public variable and link it up in the inspector. For example, we can modify ",(0,i.kt)("inlineCode",{parentName:"p"},"PlayerMovement.cs")," as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:'title="PlayerMovement.cs"',title:'"PlayerMovement.cs"'},'public class PlayerMovement : MonoBehaviour, PowerupApplicable\n{\n    //highlight-start\n    public GameConstants gameConstants;\n    float deathImpulse;\n    float upSpeed;\n    float maxSpeed;\n    float speed;\n    //highlight-end\n\n    // other attributes\n\n    // Start is called before the first frame update\n    void Start()\n    {\n        //highlight-start\n        // Set constants\n        speed = gameConstants.speed;\n        maxSpeed = gameConstants.maxSpeed;\n        deathImpulse = gameConstants.deathImpulse;\n        upSpeed = gameConstants.upSpeed;\n//highlight-end\n        // Set to be 30 FPS\n        Application.targetFrameRate = 30;\n        marioBody = GetComponent<Rigidbody2D>();\n        marioSprite = GetComponent<SpriteRenderer>();\n\n        // update animator state\n        marioAnimator.SetBool("onGround", onGroundState);\n\n    }\n\n}\n')),(0,i.kt)("p",null,"By using SO as data container for your game constants, you can easily modify them later during testing stage without having to touch your scripts."),(0,i.kt)("h3",{id:"methods"},"Methods"),(0,i.kt)("p",null,"You can also write regular methods in an SO. For instance, you can create an SO that represents a ",(0,i.kt)("inlineCode",{parentName:"p"},"Game Event"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs"},'using System.Collections.Generic;\nusing UnityEngine;\n\n[CreateAssetMenu(fileName = "GameEvent", menuName = "ScriptableObjects/GameEvent", order = 3)]\npublic class GameEvent : ScriptableObject\n{\n    private readonly List<GameEventListener> eventListeners =\n        new List<GameEventListener>();\n\n    public void Raise()\n    {\n        for(int i = eventListeners.Count -1; i >= 0; i--)\n            eventListeners[i].OnEventRaised();\n    }\n\n    public void RegisterListener(GameEventListener listener)\n    {\n        if (!eventListeners.Contains(listener))\n            eventListeners.Add(listener);\n    }\n\n    public void UnregisterListener(GameEventListener listener)\n    {\n        if (eventListeners.Contains(listener))\n            eventListeners.Remove(listener);\n    }\n}\n')),(0,i.kt)("p",null,"You can then create instances of these events, such as: ",(0,i.kt)("inlineCode",{parentName:"p"},"PlayerDeathEvent")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"ScoreIncreasedEvent")," and use it in a Script (in place of Singleton pattern). An SO can also be used to represent a ",(0,i.kt)("strong",{parentName:"p"},"state"),", e.g: ",(0,i.kt)("inlineCode",{parentName:"p"},"CurrentScore")," if that state is meant to be shared by many instances in the game (read). This allows you to retain the score of your ",(0,i.kt)("em",{parentName:"p"},"current progress")," should you exit the game. We will learn more about this next week when we dive deeper into ",(0,i.kt)("span",{className:"orange-bold"},"Scriptable Object Game Architecture"),"."),(0,i.kt)("h2",{id:"storing-variables"},"Storing Variables"),(0,i.kt)("h3",{id:"c-method-overloading"},"C# Method Overloading"),(0,i.kt)("p",null,"There are many states in the game that should be shared among different instances, such as whether Mario is alive or dead, current game score (for combo system if possible), where Mario currently is (which World to indicate progress), and many more. We can utilise SO by creating a generic variable container as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:'title="Variable.cs"',title:'"Variable.cs"'},'\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\n\npublic abstract class Variable<T> : ScriptableObject\n{\n#if UNITY_EDITOR\n    [Multiline]\n    public string DeveloperDescription = "";\n#endif\n\n    protected T _value;\n    public T Value\n    {\n        get\n        {\n            return _value;\n        }\n        set\n        {\n            SetValue(value);\n\n        }\n    }\n\n    public abstract void SetValue(T value);\n\n}\n\n')),(0,i.kt)("p",null,"Then, we can create a subclass called ",(0,i.kt)("inlineCode",{parentName:"p"},"IntVariable"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:'title="IntVariable.cs"',title:'"IntVariable.cs"'},'using UnityEngine;\n\n[CreateAssetMenu(fileName = "IntVariable", menuName = "ScriptableObjects/IntVariable", order = 2)] // so it appears as second entry in the menu\npublic class IntVariable : Variable<int>\n{\n\n    public override void SetValue(int value)\n    {\n        if (value > _value) previousHighestValue = value;\n\n        _value = value;\n    }\n\n    // overload\n    public void SetValue(IntVariable value)\n    {\n        SetValue(value.Value);\n    }\n\n    public void ApplyChange(int amount)\n    {\n        _value += amount;\n    }\n\n    // overload\n    public void ApplyChange(IntVariable amount)\n    {\n        ApplyChange(amount.Value);\n    }\n}\n')),(0,i.kt)("p",null,"Finally, you can instantiate ",(0,i.kt)("inlineCode",{parentName:"p"},"Score")," from ",(0,i.kt)("inlineCode",{parentName:"p"},"IntVariable"),". We suggest you organise your directory accordingly.:"),(0,i.kt)(s.Z,{path:n(6907).Z,widthPercentage:"100%",mdxType:"ImageCard"}))}m.isMDXComponent=!0},9715:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/2023-09-12-11-41-15-fbb1cc7e372538f1f9bb83686a348702.png"},6907:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/2023-09-12-14-25-07-8e6ecce9ad973daa2a5a78b1944f9222.png"}}]);