"use strict";(self.webpackChunksite_docusaurus_template=self.webpackChunksite_docusaurus_template||[]).push([[9522],{5162:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(7294),r=a(6010);const o={tabItem:"tabItem_Ymn6"};function i(e){let{children:t,hidden:a,className:i}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.default)(o.tabItem,i),hidden:a},t)}},4866:(e,t,a)=>{a.d(t,{Z:()=>k});var n=a(7462),r=a(7294),o=a(6010),i=a(2466),l=a(6550),s=a(1980),c=a(7392),u=a(12);function m(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:r}}=e;return{value:t,label:a,attributes:n,default:r}}))}function d(e){const{values:t,children:a}=e;return(0,r.useMemo)((()=>{const e=t??m(a);return function(e){const t=(0,c.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function p(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:a}=e;const n=(0,l.k6)(),o=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,s._X)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(n.location.search);t.set(o,e),n.replace({...n.location,search:t.toString()})}),[o,n])]}function f(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,o=d(e),[i,l]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:o}))),[s,c]=h({queryString:a,groupId:n}),[m,f]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,o]=(0,u.Nk)(a);return[n,(0,r.useCallback)((e=>{a&&o.set(e)}),[a,o])]}({groupId:n}),b=(()=>{const e=s??m;return p({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{b&&l(b)}),[b]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),c(e),f(e)}),[c,f,o]),tabValues:o}}var b=a(2389);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function v(e){let{className:t,block:a,selectedValue:l,selectValue:s,tabValues:c}=e;const u=[],{blockElementScrollPositionUntilNextRender:m}=(0,i.o5)(),d=e=>{const t=e.currentTarget,a=u.indexOf(t),n=c[a].value;n!==l&&(m(t),s(n))},p=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const a=u.indexOf(e.currentTarget)+1;t=u[a]??u[0];break}case"ArrowLeft":{const a=u.indexOf(e.currentTarget)-1;t=u[a]??u[u.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.default)("tabs",{"tabs--block":a},t)},c.map((e=>{let{value:t,label:a,attributes:i}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:e=>u.push(e),onKeyDown:p,onClick:d},i,{className:(0,o.default)("tabs__item",g.tabItem,i?.className,{"tabs__item--active":l===t})}),a??t)})))}function w(e){let{lazy:t,children:a,selectedValue:n}=e;const o=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n}))))}function C(e){const t=f(e);return r.createElement("div",{className:(0,o.default)("tabs-container",g.tabList)},r.createElement(v,(0,n.Z)({},e,t)),r.createElement(w,(0,n.Z)({},e,t)))}function k(e){const t=(0,b.Z)();return r.createElement(C,(0,n.Z)({key:String(t)},e))}},609:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>u});var n=a(7462),r=(a(7294),a(3905)),o=(a(1694),a(6596),a(6533),a(505),a(1496));a(4866),a(5162);const i={sidebar_position:2},l="Camera Movement",s={unversionedId:"babies/camera",id:"babies/camera",title:"Camera Movement",description:"We want the Camera follow the player, but clamped so that it doesn\u2019t go out of screen too much the left or too much the right. Create a new script called CameraController.cs and declare the following variables:",source:"@site/docs/02-babies/camera.md",sourceDirName:"02-babies",slug:"/babies/camera",permalink:"/50033/docs/babies/camera",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Animation",permalink:"/50033/docs/babies/animation"},next:{title:"Physics2D",permalink:"/50033/docs/babies/physics"}},c={},u=[{value:"CameraController",id:"cameracontroller",level:3},{value:"ViewportToWorldPoint",id:"viewporttoworldpoint",level:3},{value:"StartLimit and EndLimit",id:"startlimit-and-endlimit",level:3},{value:"Reset Camera",id:"reset-camera",level:3}],m={toc:u},d="wrapper";function p(e){let{components:t,...a}=e;return(0,r.kt)(d,(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"camera-movement"},"Camera Movement"),(0,r.kt)("p",null,"We want the Camera follow the player, but clamped so that it doesn\u2019t go out of screen too much the left or too much the right. Create a new script called ",(0,r.kt)("inlineCode",{parentName:"p"},"CameraController.cs")," and declare the following variables:"),(0,r.kt)("h3",{id:"cameracontroller"},"CameraController"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cs",metastring:'title="CameraController.cs"',title:'"CameraController.cs"'},"using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class CameraController : MonoBehaviour\n{\n\n    public Transform player; // Mario's Transform\n    public Transform endLimit; // GameObject that indicates end of map\n    private float offset; // initial x-offset between camera and Mario\n    private float startX; // smallest x-coordinate of the Camera\n    private float endX; // largest x-coordinate of the camera\n    private float viewportHalfWidth;\n\n}\n\n")),(0,r.kt)("h3",{id:"viewporttoworldpoint"},"ViewportToWorldPoint"),(0,r.kt)("p",null,"In the ",(0,r.kt)("inlineCode",{parentName:"p"},"Start()")," method, we need to get the ",(0,r.kt)("strong",{parentName:"p"},"world")," coordinate of the bottom-left point of the Camera\u2019s viewport using ",(0,r.kt)("inlineCode",{parentName:"p"},"ViewportToWorldPoint"),". The camera's viewport has its own ",(0,r.kt)("strong",{parentName:"p"},"local coordinate sytem"),", where ",(0,r.kt)("inlineCode",{parentName:"p"},"(0,0,0)")," ",(0,r.kt)("strong",{parentName:"p"},"means")," the ",(0,r.kt)("strong",{parentName:"p"},"bottom left")," corner of the Camera's viewport. The reason we do this is because we need to find out what exactly is the width of the camera's ",(0,r.kt)("strong",{parentName:"p"},"viewport")," by taking the difference between the global coordinate of the camera's ",(0,r.kt)("inlineCode",{parentName:"p"},"bottomLeft")," viewport position and Mario's transform ",(0,r.kt)("inlineCode",{parentName:"p"},"x"),' position. This way, we can keep the camera "centered" (or focused) on the player.'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cs",metastring:'title="CameraController.cs"',title:'"CameraController.cs"'},"using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class CameraController : MonoBehaviour\n{\n\n    void  Start()\n    {\n        //highlight-start\n        // get coordinate of the bottomleft of the viewport\n        // z doesn't matter since the camera is orthographic\n        Vector3 bottomLeft =  Camera.main.ViewportToWorldPoint(new  Vector3(0, 0, 0));\n        viewportHalfWidth  =  Mathf.Abs(bottomLeft.x  -  this.transform.position.x);\n        offset  =  this.transform.position.x  -  player.position.x;\n        startX  =  this.transform.position.x;\n        endX  =  endLimit.transform.position.x  -  viewportHalfWidth;\n        //highlight-end\n    }\n}\n\n")),(0,r.kt)("p",null,"Then under the ",(0,r.kt)("inlineCode",{parentName:"p"},"Update()")," method, the camera constantly follow the player unless it has reached the ends of the game map:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cs",metastring:'title="CameraController.cs"',title:'"CameraController.cs"'},"using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class CameraController : MonoBehaviour\n{\n\n    void  Update()\n    {\n        //highlight-start\n        float desiredX =  player.position.x  +  offset;\n        // check if desiredX is within startX and endX\n        if (desiredX  >  startX  &&  desiredX  <  endX)\n        this.transform.position  =  new  Vector3(desiredX, this.transform.position.y, this.transform.position.z);\n        //highlight-end\n    }\n}\n")),(0,r.kt)("h3",{id:"startlimit-and-endlimit"},"StartLimit and EndLimit"),(0,r.kt)("p",null,"Create an empty GameObject called ",(0,r.kt)("inlineCode",{parentName:"p"},"EndLimit")," with an EdgeCollider2D to prevent Mario from going over too much to the right. You can do the same for the left side as well, right at the left side of the Camera\u2019s ViewPort. In the clip below, we name it ",(0,r.kt)("inlineCode",{parentName:"p"},"StartLimit"),". Then in the Camera\u2019s inspector, link up the references of Mario\u2019s Transform and EndLimit\u2019s Transform:"),(0,r.kt)(o.Z,{path:"https://50033.s3.ap-southeast-1.amazonaws.com/week-2/movecamera.mp4",widthPercentage:"100%",mdxType:"VideoItem"}),(0,r.kt)("admonition",{type:"playtest"},(0,r.kt)("p",{parentName:"admonition"},"Test run and you shall have the Camera gracefully following Mario around the Scene.")),(0,r.kt)("h3",{id:"reset-camera"},"Reset Camera"),(0,r.kt)("p",null,"When Mario dies due to collision with Goomba, we now need to also reset the Camera's position back to where it started (at ",(0,r.kt)("inlineCode",{parentName:"p"},"0,0,-10"),"). Add the following code inside ",(0,r.kt)("inlineCode",{parentName:"p"},"ResetGame")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"PlayerMovement.cs"),", and ",(0,r.kt)("strong",{parentName:"p"},"don't forget")," to hook up Camera's transform to this script in the ",(0,r.kt)("strong",{parentName:"p"},"inspector"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cs",metastring:'title="PlayerMovement.cs"',title:'"PlayerMovement.cs"'},"//highlight-start\n    public Transform gameCamera;\n//highlight-end\n\n    public void ResetGame()\n    {\n        // reset position\n        marioBody.transform.position = new Vector3(-5.33f, -4.69f, 0.0f);\n\n        // other code\n\n        //highlight-start\n        // reset camera position\n        gameCamera.position = new Vector3(0, 0, -10);\n//highlight-end\n\n    }\n\n")))}p.isMDXComponent=!0}}]);